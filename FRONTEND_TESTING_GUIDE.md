# FRONTEND TESTING GUIDE

## Current Status
âœ… Backend is fully functional with all social media features
âœ… Enhanced frontend authentication with detailed logging
âœ… Authenticated actor creation implemented
â“ Testing Internet Identity flow with anchor 10000

## What Should Happen - New User Signup

### Step 1: Click "Join SocialNet"
- Should trigger `handleSignup()` function
- Console should show: `ğŸ“ SIGNUP: Starting SIGNUP...`

### Step 2: Internet Identity Authentication
- Internet Identity popup should open
- Create anchor 10000 (or any number)
- Should redirect back to app
- Console should show:
  ```
  ğŸ“ SIGNUP: Authentication successful
  ğŸ“ SIGNUP: Got principal: [some-principal-id]
  ğŸ“ SIGNUP: Creating authenticated actor...
  ğŸ”§ Creating authenticated actor with identity: [principal-id]
  ğŸ”§ Authenticated actor created successfully
  ğŸ“ SIGNUP: State set, this should trigger profile check useEffect
  ```

### Step 3: Profile Check
- Should trigger profile check useEffect
- Console should show:
  ```
  ğŸ‘¤ PROFILE_CHECK: useEffect triggered
  ğŸ‘¤ PROFILE_CHECK: isAuthenticated: true
  ğŸ‘¤ PROFILE_CHECK: currentUser: [principal-id]
  ğŸ‘¤ PROFILE_CHECK: userProfile: null
  ğŸ‘¤ PROFILE_CHECK: isSigningUp: true
  ğŸ‘¤ PROFILE_CHECK: authenticatedActor: exists
  ğŸ‘¤ PROFILE_CHECK: Conditions met, checking profile for user: [principal-id]
  ğŸ‘¤ PROFILE_CHECK: Using actor: authenticated
  ğŸ‘¤ PROFILE_CHECK: Profile result: null (or undefined)
  ğŸ‘¤ PROFILE_CHECK: No profile found for this principal
  ğŸ‘¤ PROFILE_CHECK: User is signing up, showing registration
  ```

### Step 4: Registration Form
- Should show UserRegistration component
- Fill form with:
  - Username: Sarv29
  - Full Name: [Your name]
  - Email: [Your email]
  - Bio: Testing frontend flow
  - Location: [Your location]

### Step 5: Form Submission
- Click "Create Profile"
- Console should show:
  ```
  REGISTRATION: Form submitted
  REGISTRATION: Form data: [form data object]
  REGISTRATION: Calling create_user with data: [processed data]
  REGISTRATION: Using actor: authenticated
  REGISTRATION: Backend response: "User created successfully"
  REGISTRATION: User created successfully, calling onUserCreated
  REGISTRATION: Calling onUserCreated callback
  ```

### Step 6: Profile Creation Success
- Should trigger `handleUserCreated()`
- Console should show:
  ```
  USER_CREATED: Starting handleUserCreated
  USER_CREATED: Using actor: authenticated
  USER_CREATED: Fetched user profile: [user object]
  USER_CREATED: Valid profile found
  USER_CREATED: Profile set, navigating to feed
  ```

### Step 7: Main App Navigation
- Should navigate to main app (feed view)
- Should see navigation bar with Home, Discover, Create, Profile, Logout
- Should be able to create posts, view users, etc.

## What Should Happen - Existing User Login

### Step 1: Click "Sign In"
- Should trigger `handleLogin()` function
- Use same Internet Identity anchor (10000)

### Step 2: Profile Recognition
- Should automatically recognize existing profile
- Should navigate directly to main app
- Console should show profile found and navigation to feed

## Debugging Steps

### If Stuck on Landing Page:
1. Open browser developer tools (F12)
2. Check Console tab for error messages
3. Look for the log messages listed above
4. Check if any step is failing

### Common Issues to Check:
1. **Internet Identity popup blocked** - Allow popups
2. **Authentication fails** - Check console for auth errors
3. **Actor creation fails** - Check for network/canister errors
4. **Profile check fails** - Check backend connectivity
5. **Form submission fails** - Check authenticated actor usage

### Backend Verification:
You can verify backend state with:
```bash
# Check user count
dfx canister call social_network_backend debug_user_count

# Check if specific user exists (replace with actual principal)
dfx canister call social_network_backend get_user '(principal "your-principal-here")'
```

## Expected Flow Summary:
1. **Signup**: Identity â†’ Profile Form â†’ Main App
2. **Login**: Identity â†’ Main App (direct)
3. **Multi-user**: Each anchor = separate user account

## Test Data:
- **Anchor**: 10000 (or any number you choose)
- **Username**: Sarv29
- **Principal**: Will be generated by Internet Identity
- **Expected**: Complete profile creation and main app access
